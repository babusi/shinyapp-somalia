setwd("C:/Users/sofia/Google Drive/UNHCR/Somalia data/Somalia data/DolloAdo")
#if(!require(gsheet)){install.packages("gsheet")}
if(!require(lubridate)){install.packages("lubridate")}
if(!require(zoo)){install.packages("zoo")}
if(!require(rJava)){install.packages("rJava")}
if(!require(xlsx)){install.packages("xlsx")}
acled.long <- read.csv("dollodaily.csv")
#acled.long <- head(acled.long, -30)
Dates <- sapply(acled.long[,1],as.character.Date)
acled.long$Date <- as.Date(acled.long$Date, format="%m/%d/%Y")
acled.long[,2:ncol(acled.long)] <- sapply(acled.long[,2:ncol(acled.long)], as.numeric,na.rm = TRUE)
#This section marks the aggregation per month of the Arrivals PRMN file
#output of this file goes to ArrivalsperMonth.csv
odd_indexes<-seq(3,20,1)
header <- arrs.long[0,odd_indexes]
headin <- names(header)
acled.long[is.na(acled.long)] <- 0
arrmonth <- aggregate(cbind(DolloAdo)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
monthsintotal <- nrow(arrmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(arrmonth[t,1])
y<- substr(as.character(arrmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(arrmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth <-cbind(Date,arrmonth[,3:length(arrmonth)])
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonthDecember.csv",row.names = FALSE)
arrmonth <- aggregate(cbind(DolloAdo)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth <-cbind(Date,arrmonth[,3:length(arrmonth)])
monthsintotal <- nrow(arrmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(arrmonth[t,1])
y<- substr(as.character(arrmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(arrmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth <-cbind(Date,arrmonth[,3:length(arrmonth)])
arrmonth <-cbind(Date,arrmonth[,1:length(arrmonth)])
arrmonth <-cbind(Date,arrmonth[,0:length(arrmonth)])
arrmonth <-cbind(Date,arrmonth[,2:length(arrmonth)])
arrmonth <-cbind(Date,arrmonth[,4:length(arrmonth)])
arrmonth
#if(!require(gsheet)){install.packages("gsheet")}
if(!require(lubridate)){install.packages("lubridate")}
if(!require(zoo)){install.packages("zoo")}
if(!require(rJava)){install.packages("rJava")}
if(!require(xlsx)){install.packages("xlsx")}
acled.long <- read.csv("dollodaily.csv")
Dates <- sapply(acled.long[,1],as.character.Date)
acled.long$Date <- as.Date(acled.long$Date, format="%m/%d/%Y")
acled.long[,2:ncol(acled.long)] <- sapply(acled.long[,2:ncol(acled.long)], as.numeric,na.rm = TRUE)
odd_indexes<-seq(3,20,1)
header <- arrs.long[0,odd_indexes]
headin <- names(header)
acled.long[is.na(acled.long)] <- 0
arrmonth <- aggregate(cbind(DolloAdo)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
monthsintotal <- nrow(arrmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(arrmonth[t,1])
y<- substr(as.character(arrmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(arrmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth <-cbind(Date,arrmonth[,4:length(arrmonth)])
arrmonth
arrmonth <-cbind(Date,arrmonth[,3:length(arrmonth)])
arrmonth <-cbind(Date,arrmonth[,2:length(arrmonth)])
arrmonth <-cbind(Date,arrmonth[,1:length(arrmonth)])
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth <-cbind(Date,arrmonth[,1:length(arrmonth)])
arrmonth
header <- arrs.long[0,odd_indexes]
headin <- names(header)
acled.long[is.na(acled.long)] <- 0
arrmonth <- aggregate(cbind(DolloAdo)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
monthsintotal <- nrow(arrmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(arrmonth[t,1])
y<- substr(as.character(arrmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(arrmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonthDecember.csv",row.names = FALSE)
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonthDecember.csv",row.names = FALSE)
acled.long <- read.csv("alldaily.csv")
Dates <- sapply(acled.long[,1],as.character.Date)
acled.long$Date <- as.Date(acled.long$Date, format="%m/%d/%Y")
acled.long[,2:ncol(acled.long)] <- sapply(acled.long[,2:ncol(acled.long)], as.numeric,na.rm = TRUE)
odd_indexes<-seq(3,20,1)
header <- arrs.long[0,odd_indexes]
headin <- names(header)
acled.long[is.na(acled.long)] <- 0
arrmonth <- aggregate(cbind(DolloAdo)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
arrmonth <- aggregate(cbind(Awdal, Badadir, Bakol, Bari, Bay, Bay,
Galgadud,Gedo,Hiran,Lower.Juba, Lower.Shabelle,
Middle.Juba, Middle.Shabelle, Mudug, Nugal, Sanag, Sool, Togdheer,
Woqooyi.Galbeed)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
monthsintotal <- nrow(arrmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(arrmonth[t,1])
y<- substr(as.character(arrmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(arrmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonthDecember.csv",row.names = FALSE)
arrmonth <- aggregate(cbind(Awdal,  Bakol, Badadir, Bari,  Bay,
Galgadud,Gedo,Hiran,Lower.Juba, Middle.Juba,
Mudug, Nugal, Sanag, Lower.Shabelle,
Middle.Shabelle, Sool, Togdheer,
Woqooyi.Galbeed)~(month(Date)+year(Date)),
data=acled.long,FUN=sum)
monthsintotal <- nrow(arrmonth)
monthdate<- rep(NA,monthsintotal)
for (t in 1:monthsintotal){
m <- as.character(arrmonth[t,1])
y<- substr(as.character(arrmonth[t,2]),3,4)
if(nchar(m)==1){
m <- paste("0",as.character(arrmonth[t,1]),sep="")
}
monthdate[t] <- paste(m,"/",y,sep="")
}
Date <-as.yearmon(monthdate,format = "%m/%y")
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonthDecember.csv",row.names = FALSE)
arrmonth <-cbind(Date,arrmonth[,1:length(arrmonth)])
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonthDecember.csv",row.names = FALSE)
Date <-as.yearmon(monthdate,format = "%m/%y")
arrmonth <-cbind(Date,arrmonth[,1:length(arrmonth)])
write.csv(as.data.frame(arrmonth[1:length(arrmonth)]), file ="ArrivalsperMonthDecember.csv",row.names = FALSE)
setwd("C:/Users/sofia")
setwd("C:/Users/sofia/shinyapp-somalia")
setwd("C:/Users/sofia/shinyapp-somalia")
shiny::runApp()
